#####
# Circle CI
# 
# For running docker images on circle ci, see: https://circleci.com/docs/docker
# For circle.yml explanation, see: https://circleci.com/docs/manually
# Python specific configuration, see: https://circleci.com/docs/language-python
#####


machine:
    services:
        - docker
    python:
        version: 2.7.11

dependencies:
    pre:
        - pip install -r requirements.txt
        - pip install -e .
        - pip install pytest
        - pip install pytest-cov

test:
   override:
      - mkdir -p $CIRCLE_TEST_REPORTS/pytest
      - py.test --cov --cov-report html:$CIRCLE_TEST_REPORTS --junitxml=$CIRCLE_TEST_REPORTS/pytest/junit.xml tests/
      


### If test pass - deploy and run documentation
# deployment:
#   production:
#     branch: master
#     commands:
#       - ./deploy_docs.sh docs/build/html